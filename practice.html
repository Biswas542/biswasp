<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Foundation Test for Basic Japanese (JFT-Basic)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "MS Gothic", "Hiragino Sans", "Yu Gothic", sans-serif;
            background-color: #f0f0f0;
            color: #333;
            overflow-x: hidden;
        }

        /* Prometric CBT Header */
        .cbt-header {
            background-color: #2c5aa0;
            color: white;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            height: 40px;
            border-bottom: 1px solid #1e4080;
        }

        .test-title {
            font-weight: bold;
            font-size: 16px;
        }

        .time-display {
            background-color: #1e4080;
            padding: 4px 12px;
            border-radius: 3px;
            font-family: "Courier New", monospace;
            font-size: 16px;
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* Navigation Bar */
        .nav-bar {
            background-color: #f8f8f8;
            border-bottom: 2px solid #cccccc;
            padding: 12px 20px;
            display: flex;
            justify-content: center;
        }

        .current-section-display {
            text-align: center;
            padding: 8px 16px;
            border-radius: 4px;
            background-color: #2c5aa0;
            color: white;
        }

        .current-section-title {
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 4px;
        }

        .current-section-subtitle {
            font-size: 12px;
            color: #ccc;
        }

        /* Main CBT Interface */
        .cbt-container {
            height: calc(100vh - 100px);
            display: flex;
            background-color: #e8e8e8;
        }

        /* Left Panel - Question Navigation */
        .question-panel {
            width: 180px;
            background-color: #ffffff;
            border-right: 2px solid #cccccc;
            padding: 16px;
            overflow-y: auto;
            order: 1;
        }

        .section-header {
            font-size: 12px;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 8px;
            padding-bottom: 4px;
            border-bottom: 1px solid #ddd;
            text-align: center;
        }

        .question-column {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-bottom: 16px;
        }

        .question-num {
            width: 100%;
            height: 28px;
            border: 1px solid #666;
            background-color: white;
            text-align: center;
            line-height: 26px;
            font-size: 12px;
            cursor: pointer;
            font-weight: bold;
        }

        .question-num.current {
            background-color: #2c5aa0;
            color: white;
        }

        .question-num.answered {
            background-color: #90EE90;
            border-color: #32CD32;
        }

        .question-num.flagged {
            background-color: #FFD700;
            border-color: #FFA500;
        }

        .section-divider {
            height: 1px;
            background-color: #ccc;
            margin: 8px 0;
        }

        /* Main Content Area */
        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background-color: white;
            order: 2;
        }

        /* Question Header Bar */
        .question-header {
            background-color: #f8f8f8;
            padding: 12px 20px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
        }

        .question-info {
            font-weight: bold;
        }

        .section-name {
            color: #2c5aa0;
            font-size: 13px;
        }

        /* Language Toggle */
        .language-selector {
            display: flex;
            border: 1px solid #999;
            border-radius: 0;
        }

        .lang-btn {
            padding: 6px 12px;
            background-color: #f0f0f0;
            border: none;
            border-right: 1px solid #999;
            cursor: pointer;
            font-size: 12px;
            color: #333;
        }

        .lang-btn:last-child {
            border-right: none;
        }

        .lang-btn.active {
            background-color: #2c5aa0;
            color: white;
        }

        /* Question Content */
        .question-content {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            line-height: 1.6;
        }

        .question-text {
            font-size: 16px;
            margin-bottom: 20px;
            padding: 16px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .question-japanese {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #000;
            font-family: "MS Gothic", "Yu Gothic", serif;
        }

        .question-english {
            font-size: 14px;
            color: #666;
            font-style: italic;
        }

        /* Audio Player */
        .audio-section {
            background-color: #e8f4f8;
            border: 2px solid #4a90e2;
            padding: 20px;
            margin: 16px 0;
            text-align: center;
            border-radius: 4px;
        }

        .audio-controls {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 12px;
        }

        .audio-btn {
            padding: 10px 20px;
            background-color: #2c5aa0;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            border-radius: 3px;
        }

        .audio-btn:hover {
            background-color: #1e4080;
        }

        .audio-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        /* Options */
        .options-container {
            margin-top: 24px;
        }

        .option {
            display: flex;
            align-items: flex-start;
            margin-bottom: 16px;
            cursor: pointer;
            padding: 12px;
            border: 1px solid #ddd;
            background-color: #fafafa;
            border-radius: 3px;
        }

        .option:hover {
            background-color: #f0f8ff;
            border-color: #2c5aa0;
        }

        .option.selected {
            background-color: #e6f3ff;
            border-color: #2c5aa0;
            border-width: 2px;
        }

        .option-radio {
            width: 18px;
            height: 18px;
            border: 2px solid #666;
            border-radius: 50%;
            margin-right: 12px;
            margin-top: 2px;
            position: relative;
            background-color: white;
        }

        .option.selected .option-radio {
            border-color: #2c5aa0;
        }

        .option.selected .option-radio::after {
            content: '';
            width: 10px;
            height: 10px;
            background-color: #2c5aa0;
            border-radius: 50%;
            position: absolute;
            top: 2px;
            left: 2px;
        }

        .option-text {
            flex: 1;
        }

        .option-jp {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 4px;
            font-family: "MS Gothic", "Yu Gothic", serif;
        }

        .option-en {
            font-size: 13px;
            color: #666;
        }

        /* Bottom Controls */
        .cbt-controls {
            background-color: #f0f0f0;
            padding: 16px 24px;
            border-top: 2px solid #cccccc;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-buttons {
            display: flex;
            gap: 12px;
        }

        .cbt-btn {
            padding: 8px 24px;
            background-color: #2c5aa0;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            border-radius: 3px;
            min-width: 80px;
        }

        .cbt-btn:hover {
            background-color: #1e4080;
        }

        .cbt-btn:disabled {
            background-color: #999;
            cursor: not-allowed;
        }

        .cbt-btn.secondary {
            background-color: #666;
        }

        .cbt-btn.secondary:hover {
            background-color: #555;
        }

        .flag-btn {
            background-color: #ff8c00;
            padding: 6px 16px;
            font-size: 12px;
        }

        .flag-btn:hover {
            background-color: #e67300;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .question-panel {
                width: 120px;
            }
            
            .question-content {
                padding: 16px;
            }
            
            .cbt-controls {
                padding: 12px 16px;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>
<body>
    <!-- CBT Header -->
    <div class="cbt-header">
        <div class="test-title">Japan Foundation Test for Basic Japanese (JFT-Basic)</div>
        <div class="time-display" id="timeDisplay">60:00</div>
    </div>

    <!-- Navigation Bar -->
    <div class="nav-bar">
        <div class="current-section-display" id="currentSectionDisplay">
            <div class="current-section-title" id="navSectionTitle">Script & Vocabulary</div>
            <div class="current-section-subtitle" id="navSectionSubtitle">Questions 1-12</div>
        </div>
    </div>

    <!-- Main CBT Interface -->
    <div class="cbt-container">
        <!-- Left Question Navigation Panel -->
        <div class="question-panel">
            <div class="section-header">Section 1</div>
            <div class="question-column" id="section1Column"></div>
            <div class="section-divider"></div>
            
            <div class="section-header">Section 2</div>
            <div class="question-column" id="section2Column"></div>
            <div class="section-divider"></div>
            
            <div class="section-header">Section 3</div>
            <div class="question-column" id="section3Column"></div>
            <div class="section-divider"></div>
            
            <div class="section-header">Section 4</div>
            <div class="question-column" id="section4Column"></div>
        </div>

        <!-- Main Content -->
        <div class="content-area" id="contentArea">
            <!-- Question Header -->
            <div class="question-header">
                <div>
                    <span class="question-info">Question <span id="currentNum">1</span> of 48</span>
                    <div class="section-name" id="currentSection">Script and Vocabulary</div>
                </div>
                <div class="language-selector">
                    <button class="lang-btn active" onclick="setLanguage('ja')">Êó•Êú¨Ë™û</button>
                    <button class="lang-btn" onclick="setLanguage('en')">English</button>
                </div>
            </div>

            <!-- Question Content -->
            <div class="question-content" id="questionContent">
                <div class="question-text">
                    <div class="question-japanese" id="questionJA">ÂïèÈ°åÊñá„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô„ÄÇ</div>
                    <div class="question-english" id="questionEN" style="display: none;">Question text will appear here.</div>
                </div>

                <!-- Audio Section (for listening questions) -->
                <div class="audio-section" id="audioSection" style="display: none;">
                    <div style="font-weight: bold; margin-bottom: 8px;">üéß Audio</div>
                    <div>Listen carefully and select the best answer.</div>
                    <div class="audio-controls">
                        <button class="audio-btn" onclick="playAudio()" id="playBtn">‚ñ∂ Play</button>
                        <button class="audio-btn" onclick="replayAudio()" id="replayBtn" disabled>üîÅ Replay</button>
                    </div>
                    <div style="margin-top: 12px; font-size: 12px; color: #666;">
                        Audio can be played up to 2 times.
                    </div>
                </div>

                <!-- Options -->
                <div class="options-container" id="optionsContainer">
                    <!-- Options populated by JavaScript -->
                </div>
            </div>

            <!-- Controls -->
            <div class="cbt-controls">
                <div class="nav-buttons">
                    <button class="cbt-btn secondary" onclick="previousQuestion()" id="prevBtn">‚óÄ Previous</button>
                    <button class="cbt-btn" onclick="nextQuestion()" id="nextBtn">Next ‚ñ∂</button>
                </div>
                
                <div style="display: flex; gap: 12px;">
                    <button class="flag-btn cbt-btn" onclick="flagQuestion()" id="flagBtn">üèÅ Flag</button>
                    <button class="cbt-btn" onclick="submitTest()" id="submitBtn" style="background-color: #dc3545;">Submit Test</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Question Bank - 12 questions per section (48 total)
        const questionBank = {
            section1: [ // Script and Vocabulary (12 questions)
                {
                    questionJA: "„Äå„Åü„Åπ„Åæ„Åô„Äç„ÅÆÊÑèÂë≥„Å®„Åó„Å¶ÊúÄ„ÇÇÈÅ©Âàá„Å™„ÇÇ„ÅÆ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the most appropriate meaning of '„Åü„Åπ„Åæ„Åô'.",
                    Image:false,
                    options: [
                        {ja: "È£≤„Åø„Åæ„Åô", en: "drink", correct: false},
                        {ja: "È£ü„Åπ„Åæ„Åô", en: "eat", correct: true},
                        {ja: "ÂØù„Åæ„Åô", en: "sleep", correct: false},
                       
                    ]
                },
                {
                    questionJA: "„Äå„ÅØ„Åü„Çâ„Åç„Åæ„Åô„Äç„ÅÆÊº¢Â≠ó„Å®„Åó„Å¶Ê≠£„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the correct kanji for '„ÅØ„Åü„Çâ„Åç„Åæ„Åô'.",
                    options: [
                        {ja: "ÂÉç„Åç„Åæ„Åô", en: "work", correct: true},
                        {ja: "Âãï„Åç„Åæ„Åô", en: "move", correct: false},
                        {ja: "Ê≠©„Åç„Åæ„Åô", en: "walk", correct: false},
                        
                    ]
                },
                {
                    questionJA: "„Äå„ÅÇ„Å§„ÅÑ„Åß„Åô„Äç„ÅÆÂèçÂØæ„ÅÆÊÑèÂë≥„ÇíË°®„ÅôË®ÄËëâ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the word that means the opposite of '„ÅÇ„Å§„ÅÑ„Åß„Åô'.",
                    
                    options: [
                        {ja: "„Åï„ÇÄ„ÅÑ„Åß„Åô", en: "cold", correct: true},
                        {ja: "„ÅÇ„Åü„Åü„Åã„ÅÑ„Åß„Åô", en: "warm", correct: false},
                        {ja: "„Åô„Åö„Åó„ÅÑ„Åß„Åô", en: "cool", correct: false},
                        {ja: "„ÅÇ„Åã„Çã„ÅÑ„Åß„Åô", en: "bright", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„ÇÑ„Åô„Åø„Åæ„Åô„Äç„ÅÆÊÑèÂë≥„Å®„Åó„Å¶Ê≠£„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the correct meaning of '„ÇÑ„Åô„Åø„Åæ„Åô'.",
                    options: [
                        {ja: "‰ºë„Åø„Åæ„Åô", en: "rest", correct: true},
                        {ja: "ÊÄ•„Åé„Åæ„Åô", en: "hurry", correct: false},
                        {ja: "Ê≥£„Åç„Åæ„Åô", en: "cry", correct: false},
                        {ja: "Á¨ë„ÅÑ„Åæ„Åô", en: "laugh", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„Åπ„Çì„Åç„Çá„ÅÜ„Åó„Åæ„Åô„Äç„ÇíÊº¢Â≠ó„ÅßÊõ∏„Åè„Å®„Å©„Çå„Åß„Åô„Åã„ÄÇ",
                    questionEN: "How do you write '„Åπ„Çì„Åç„Çá„ÅÜ„Åó„Åæ„Åô' in kanji?",
                    options: [
                        {ja: "ÂãâÂº∑„Åó„Åæ„Åô", en: "study", correct: true},
                        {ja: "ÈÅãÂãï„Åó„Åæ„Åô", en: "exercise", correct: false},
                        {ja: "‰ªï‰∫ã„Åó„Åæ„Åô", en: "work", correct: false},
                        {ja: "Ë≤∑„ÅÑÁâ©„Åó„Åæ„Åô", en: "shop", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„ÅÇ„Åï„Åî„ÅØ„Çì„Äç„ÅÆÊÑèÂë≥„Å®„Åó„Å¶Ê≠£„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the correct meaning of '„ÅÇ„Åï„Åî„ÅØ„Çì'.",
                    options: [
                        {ja: "Êúù„Åî„ÅØ„Çì", en: "breakfast", correct: true},
                        {ja: "Êòº„Åî„ÅØ„Çì", en: "lunch", correct: false},
                        {ja: "Â§ú„Åî„ÅØ„Çì", en: "dinner", correct: false},
                        {ja: "„Åä„ÇÑ„Å§", en: "snack", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„Åä„Åä„Åç„ÅÑ„Åß„Åô„Äç„ÅÆÂèçÂØæ„ÅÆÊÑèÂë≥„ÇíË°®„ÅôË®ÄËëâ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the word that means the opposite of '„Åä„Åä„Åç„ÅÑ„Åß„Åô'.",
                    options: [
                        {ja: "„Å°„ÅÑ„Åï„ÅÑ„Åß„Åô", en: "small", correct: true},
                        {ja: "„Åü„Åã„ÅÑ„Åß„Åô", en: "high/expensive", correct: false},
                        {ja: "„Å≤„Åè„ÅÑ„Åß„Åô", en: "low", correct: false},
                        {ja: "„ÇÑ„Åô„ÅÑ„Åß„Åô", en: "cheap", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„Åø„Åö„ÅÜ„Åø„Äç„ÇíÊº¢Â≠ó„ÅßÊõ∏„Åè„Å®„Å©„Çå„Åß„Åô„Åã„ÄÇ",
                    questionEN: "How do you write '„Åø„Åö„ÅÜ„Åø' in kanji?",
                    options: [
                        {ja: "Êπñ", en: "lake", correct: true},
                        {ja: "Êµ∑", en: "sea", correct: false},
                        {ja: "Â∑ù", en: "river", correct: false},
                        {ja: "Ê±†", en: "pond", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„Åã„ÅÑ„Åó„ÇÉ„Äç„ÅÆÊÑèÂë≥„Å®„Åó„Å¶Ê≠£„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the correct meaning of '„Åã„ÅÑ„Åó„ÇÉ'.",
                    options: [
                        {ja: "‰ºöÁ§æ", en: "company", correct: true},
                        {ja: "Â≠¶Ê†°", en: "school", correct: false},
                        {ja: "ÁóÖÈô¢", en: "hospital", correct: false},
                        {ja: "ÈäÄË°å", en: "bank", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„ÅÇ„Åü„Çâ„Åó„ÅÑ„Åß„Åô„Äç„ÅÆÂèçÂØæ„ÅÆÊÑèÂë≥„ÇíË°®„ÅôË®ÄËëâ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the word that means the opposite of '„ÅÇ„Åü„Çâ„Åó„ÅÑ„Åß„Åô'.",
                    options: [
                        {ja: "„Åµ„Çã„ÅÑ„Åß„Åô", en: "old", correct: true},
                        {ja: "„Çè„Åã„ÅÑ„Åß„Åô", en: "young", correct: false},
                        {ja: "„Åç„Çå„ÅÑ„Åß„Åô", en: "beautiful", correct: false},
                        {ja: "„Åä„ÇÇ„Åó„Çç„ÅÑ„Åß„Åô", en: "interesting", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„ÇÑ„Å£„Åç„Çá„Åè„Äç„ÇíÊº¢Â≠ó„ÅßÊõ∏„Åè„Å®„Å©„Çå„Åß„Åô„Åã„ÄÇ",
                    questionEN: "How do you write '„ÇÑ„Å£„Åç„Çá„Åè' in kanji?",
                    options: [
                        {ja: "Ëñ¨Â±Ä", en: "pharmacy", correct: true},
                        {ja: "ÈÉµ‰æøÂ±Ä", en: "post office", correct: false},
                        {ja: "Ë≠¶ÂØü", en: "police", correct: false},
                        {ja: "Ê∂àÈò≤ÁΩ≤", en: "fire station", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„Åß„Çì„Åó„ÇÉ„Äç„ÅÆÊÑèÂë≥„Å®„Åó„Å¶Ê≠£„Åó„ÅÑ„ÇÇ„ÅÆ„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "Select the correct meaning of '„Åß„Çì„Åó„ÇÉ'.",
                    options: [
                        {ja: "ÈõªËªä", en: "train", correct: true},
                        {ja: "„Éê„Çπ", en: "bus", correct: false},
                        {ja: "„Çø„ÇØ„Ç∑„Éº", en: "taxi", correct: false},
                        {ja: "È£õË°åÊ©ü", en: "airplane", correct: false}
                    ]
                }
            ],
            
            section2: [ // Conversation and Expression (12 questions)
                {
                    questionJA: "A: „Äå‰ªäÊó•„ÅØ‰ΩïÊôÇ„Å´Ëµ∑„Åç„Åæ„Åó„Åü„Åã„ÄÇ„Äç B: „ÄåÔºøÔºøÔºøÔºøËµ∑„Åç„Åæ„Åó„Åü„ÄÇ„Äç",
                    questionEN: "A: 'What time did you wake up today?' B: 'I woke up at ____.'",
                    options: [
                        {ja: "7ÊôÇ„Å´", en: "at 7 o'clock", correct: true},
                        {ja: "7ÊôÇ„Çí", en: "7 o'clock (object)", correct: false},
                        {ja: "7ÊôÇ„Åß", en: "by 7 o'clock", correct: false},
                        {ja: "7ÊôÇ„Åå", en: "7 o'clock (subject)", correct: false}
                    ]
                },
                {
                    questionJA: "Â∫óÂì°: „Äå„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åõ„ÄÇ„Äç ÂÆ¢: „ÄåÔºøÔºøÔºøÔºø„Äç",
                    questionEN: "Store clerk: 'Welcome!' Customer: '____'",
                    options: [
                        {ja: "„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô", en: "Thank you", correct: false},
                        {ja: "„Åô„Åø„Åæ„Åõ„Çì„ÄÅ„Åì„Çå„Çí„Åè„Å†„Åï„ÅÑ", en: "Excuse me, I'll take this", correct: true},
                        {ja: "„Åï„Çà„ÅÜ„Å™„Çâ", en: "Goodbye", correct: false},
                        {ja: "„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô", en: "Good morning", correct: false}
                    ]
                },
                {
                    questionJA: "„ÄåÁßÅ„ÅØÂ≠¶Ê†°ÔºøÔºøË°å„Åç„Åæ„Åô„ÄÇ„ÄçÊ≠£„Åó„ÅÑÂä©Ë©û„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "'I go ___ school.' Select the correct particle.",
                    options: [
                        {ja: "„Å´", en: "to", correct: true},
                        {ja: "„Çí", en: "object marker", correct: false},
                        {ja: "„Åß", en: "at/by", correct: false},
                        {ja: "„Åã„Çâ", en: "from", correct: false}
                    ]
                },
                {
                    questionJA: "A: „Äå„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü„ÄÇ„Äç B: „ÄåÔºøÔºøÔºøÔºø„Äç",
                    questionEN: "A: 'Good job today.' B: '____'",
                    options: [
                        {ja: "„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü", en: "Good job to you too", correct: true},
                        {ja: "„ÅÑ„Åü„Å†„Åç„Åæ„Åô", en: "Thank you for the food", correct: false},
                        {ja: "„ÅÑ„Å£„Å¶„Åç„Åæ„Åô", en: "I'm going", correct: false},
                        {ja: "„Åü„Å†„ÅÑ„Åæ", en: "I'm home", correct: false}
                    ]
                },
                {
                    questionJA: "„ÄåÊòéÊó•Èõ®ÔºøÔºøÈôç„Çä„Åæ„Åô„ÄÇ„ÄçÊ≠£„Åó„ÅÑÂä©Ë©û„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "'Tomorrow it ___ rain.' Select the correct particle.",
                    options: [
                        {ja: "„Åå", en: "subject marker", correct: true},
                        {ja: "„Çí", en: "object marker", correct: false},
                        {ja: "„Å´", en: "to", correct: false},
                        {ja: "„Åß", en: "at", correct: false}
                    ]
                },
                {
                    questionJA: "A: „Äå„Åô„Åø„Åæ„Åõ„Çì„ÄÅÈßÖ„ÅØ„Å©„Åì„Åß„Åô„Åã„ÄÇ„Äç B: „Äå„ÅÇ„Åù„ÅìÔºøÔºø„ÅÇ„Çä„Åæ„Åô„ÄÇ„Äç",
                    questionEN: "A: 'Excuse me, where is the station?' B: 'It's over there ___.'",
                    options: [
                        {ja: "„Å´", en: "at/in", correct: true},
                        {ja: "„Çí", en: "object marker", correct: false},
                        {ja: "„Åß", en: "at/by", correct: false},
                        {ja: "„Åã„Çâ", en: "from", correct: false}
                    ]
                },
                {
                    questionJA: "„ÄåÊò®Êó•ÂèãÈÅîÔºøÔºøÊò†Áîª„ÇíË¶ã„Åæ„Åó„Åü„ÄÇ„ÄçÊ≠£„Åó„ÅÑÂä©Ë©û„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "'Yesterday I watched a movie ___ my friend.' Select the correct particle.",
                    options: [
                        {ja: "„Å®", en: "with", correct: true},
                        {ja: "„Å´", en: "to/at", correct: false},
                        {ja: "„Åß", en: "at/by", correct: false},
                        {ja: "„Çí", en: "object marker", correct: false}
                    ]
                },
                {
                    questionJA: "A: „Äå„ÅÑ„Åü„Å†„Åç„Åæ„Åô„ÄÇ„Äç B: „ÄåÔºøÔºøÔºøÔºø„Äç",
                    questionEN: "A: 'Thank you for the food.' B: '____'",
                    options: [
                        {ja: "„Å©„ÅÜ„Åû", en: "Please go ahead", correct: true},
                        {ja: "„Åî„Å°„Åù„ÅÜ„Åï„Åæ", en: "Thank you for the meal", correct: false},
                        {ja: "„Åô„Åø„Åæ„Åõ„Çì", en: "Excuse me", correct: false},
                        {ja: "„ÅØ„Åò„ÇÅ„Åæ„Åó„Å¶", en: "Nice to meet you", correct: false}
                    ]
                },
                {
                    questionJA: "„Äå„Ç≥„Éº„Éí„ÉºÔºøÔºøÈ£≤„Åø„Åæ„Åô„ÄÇ„ÄçÊ≠£„Åó„ÅÑÂä©Ë©û„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "'I drink coffee ___.' Select the correct particle.",
                    options: [
                        {ja: "„Çí", en: "object marker", correct: true},
                        {ja: "„Å´", en: "to/at", correct: false},
                        {ja: "„Åß", en: "at/by", correct: false},
                        {ja: "„Åå", en: "subject marker", correct: false}
                    ]
                },
                {
                    questionJA: "A: „ÄåÂ§±Á§º„Åó„Åæ„Åô„ÄÇ„Äç B: „ÄåÔºøÔºøÔºøÔºø„Äç",
                    questionEN: "A: 'Excuse me (leaving).' B: '____'",
                    options: [
                        {ja: "„ÅäÁñ≤„ÇåÊßò„Åß„Åó„Åü", en: "Good job today", correct: true},
                        {ja: "„ÅÑ„Çâ„Å£„Åó„ÇÉ„ÅÑ„Åæ„Åõ", en: "Welcome", correct: false},
                        {ja: "„Åä„ÅØ„Çà„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô", en: "Good morning", correct: false},
                        {ja: "„ÅÑ„Åü„Å†„Åç„Åæ„Åô", en: "Thank you for the food", correct: false}
                    ]
                },
                {
                    questionJA: "„ÄåÂõ≥Êõ∏È§®ÔºøÔºøÊú¨„ÇíÂÄü„Çä„Åæ„Åô„ÄÇ„ÄçÊ≠£„Åó„ÅÑÂä©Ë©û„ÇíÈÅ∏„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ",
                    questionEN: "'I borrow books ___ the library.' Select the correct particle.",
                    options: [
                        {ja: "„Åß", en: "at", correct: true},
                        {ja: "„Å´", en: "to", correct: false},
                        {ja: "„Çí", en: "object marker", correct: false},
                        {ja: "„Åã„Çâ", en: "from", correct: false}
                    ]
                },
                {
                    questionJA: "A: „Äå„Åä„Åã„Åà„Çä„Å™„Åï„ÅÑ„ÄÇ„Äç B: „ÄåÔºøÔºøÔºøÔºø„Äç",
                    questionEN: "A: 'Welcome back.' B: '____'",
                    options: [
                        {ja: "„Åü„Å†„ÅÑ„Åæ", en: "I'm back", correct: true},
                        {ja: "„ÅÑ„Å£„Å¶„Åç„Åæ„Åô", en: "I'm going", correct: false},
                        {ja: "„Åä„ÇÑ„Åô„Åø„Å™„Åï„ÅÑ", en: "Good night", correct: false},
                        {ja: "„Åä„ÇÅ„Åß„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô", en: "Congratulations", correct: false}
                    ]
                }
            ],
            
            section3: [ // Listening (12 questions)
                {
                    questionJA: "Èü≥Â£∞„ÇíËÅû„ÅÑ„Å¶„ÄÅÁî∑„ÅÆ‰∫∫„ÅØ‰ΩïÊôÇ„Å´‰ºöÁ§æ„Å´Ë°å„Åç„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Listen to the audio. What time does the man go to the company?",
                    hasAudio: true,
                    audioText: "audio.mp3",
                    options: [
                        {ja: "7ÊôÇ", en: "7 o'clock", correct: false},
                        {ja: "8ÊôÇ", en: "8 o'clock", correct: true},
                        {ja: "9ÊôÇ", en: "9 o'clock", correct: false},
                        {ja: "10ÊôÇ", en: "10 o'clock", correct: false}
                    ]
                },
                {
                    questionJA: "Â•≥„ÅÆ‰∫∫„ÅØ‰Ωï„ÇíË≤∑„ÅÑ„Å´Ë°å„Åç„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "What is the woman going to buy?",
                    hasAudio: true,
                    audioText: "„Çπ„Éº„Éë„Éº„Åß„Éë„É≥„Å®Áâõ‰π≥„ÇíË≤∑„ÅÑ„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "„Éë„É≥„Å®Áâõ‰π≥", en: "bread and milk", correct: true},
                        {ja: "ËÇâ„Å®ÈáéËèú", en: "meat and vegetables", correct: false},
                        {ja: "„ÅäÁ±≥„Å®„ÅäËå∂", en: "rice and tea", correct: false},
                        {ja: "È≠ö„Å®Âçµ", en: "fish and eggs", correct: false}
                    ]
                },
                {
                    questionJA: "Èü≥Â£∞„ÇíËÅû„ÅÑ„Å¶„ÄÅ‰ªäÊó•„ÅÆÂ§©Ê∞ó„ÅØ„Å©„ÅÜ„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Listen to the audio. How is today's weather?",
                    hasAudio: true,
                    audioText: "‰ªäÊó•„ÅØ„Å®„Å¶„ÇÇÊöë„ÅÑ„Åß„Åô„ÄÇ",
                    options: [
                        {ja: "Êöë„ÅÑ„Åß„Åô", en: "hot", correct: true},
                        {ja: "ÂØí„ÅÑ„Åß„Åô", en: "cold", correct: false},
                        {ja: "Èõ®„Åß„Åô", en: "rainy", correct: false},
                        {ja: "Èõ™„Åß„Åô", en: "snowy", correct: false}
                    ]
                },
                {
                    questionJA: "Áî∑„ÅÆ‰∫∫„ÅØ„Å©„Åì„ÅßÊòº„Åî„ÅØ„Çì„ÇíÈ£ü„Åπ„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Where does the man eat lunch?",
                    hasAudio: true,
                    audioText: "‰ºöÁ§æ„ÅÆÈ£üÂ†Ç„ÅßÊòº„Åî„ÅØ„Çì„ÇíÈ£ü„Åπ„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "‰ºöÁ§æ„ÅÆÈ£üÂ†Ç", en: "company cafeteria", correct: true},
                        {ja: "„É¨„Çπ„Éà„É©„É≥", en: "restaurant", correct: false},
                        {ja: "ÂÆ∂", en: "home", correct: false},
                        {ja: "„Ç≥„É≥„Éì„Éã", en: "convenience store", correct: false}
                    ]
                },
                {
                    questionJA: "Â•≥„ÅÆ‰∫∫„ÅØ‰ΩïÊôÇ„Å´ÂØù„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "What time does the woman go to sleep?",
                    hasAudio: true,
                    audioText: "ÊØéÊô©11ÊôÇ„Å´ÂØù„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "10ÊôÇ", en: "10 o'clock", correct: false},
                        {ja: "11ÊôÇ", en: "11 o'clock", correct: true},
                        {ja: "12ÊôÇ", en: "12 o'clock", correct: false},
                        {ja: "9ÊôÇ", en: "9 o'clock", correct: false}
                    ]
                },
                {
                    questionJA: "Èü≥Â£∞„ÇíËÅû„ÅÑ„Å¶„ÄÅÁî∑„ÅÆ‰∫∫„ÅÆË∂£Âë≥„ÅØ‰Ωï„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Listen to the audio. What is the man's hobby?",
                    hasAudio: true,
                    audioText: "ÁßÅ„ÅÆË∂£Âë≥„ÅØË™≠Êõ∏„Åß„Åô„ÄÇÊØéÊó•Êú¨„ÇíË™≠„Åø„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "Ë™≠Êõ∏", en: "reading", correct: true},
                        {ja: "Êò†Áîª", en: "movies", correct: false},
                        {ja: "Èü≥Ê•Ω", en: "music", correct: false},
                        {ja: "„Çπ„Éù„Éº„ÉÑ", en: "sports", correct: false}
                    ]
                },
                {
                    questionJA: "Â•≥„ÅÆ‰∫∫„ÅØ„Å©„Åì„Å´‰Ωè„Çì„Åß„ÅÑ„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Where does the woman live?",
                    hasAudio: true,
                    audioText: "ÁßÅ„ÅØÊù±‰∫¨„Å´‰Ωè„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "Êù±‰∫¨", en: "Tokyo", correct: true},
                        {ja: "Â§ßÈò™", en: "Osaka", correct: false},
                        {ja: "‰∫¨ÈÉΩ", en: "Kyoto", correct: false},
                        {ja: "Ê®™Êµú", en: "Yokohama", correct: false}
                    ]
                },
                {
                    questionJA: "Èü≥Â£∞„ÇíËÅû„ÅÑ„Å¶„ÄÅÁî∑„ÅÆ‰∫∫„ÅØ‰Ωï„ÇíÈ£≤„Åø„Åæ„Åó„Åü„Åã„ÄÇ",
                    questionEN: "Listen to the audio. What did the man drink?",
                    hasAudio: true,
                    audioText: "Êúù„ÅØ„ÅÑ„Å§„ÇÇ„Ç≥„Éº„Éí„Éº„ÇíÈ£≤„Åø„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "„Ç≥„Éº„Éí„Éº", en: "coffee", correct: true},
                        {ja: "„ÅäËå∂", en: "tea", correct: false},
                        {ja: "Ê∞¥", en: "water", correct: false},
                        {ja: "„Ç∏„É•„Éº„Çπ", en: "juice", correct: false}
                    ]
                },
                {
                    questionJA: "Â•≥„ÅÆ‰∫∫„ÅØ„ÅÑ„Å§Êó•Êú¨„Å´Êù•„Åæ„Åó„Åü„Åã„ÄÇ",
                    questionEN: "When did the woman come to Japan?",
                    hasAudio: true,
                    audioText: "ÁßÅ„ÅØÂéªÂπ¥„ÅÆ4Êúà„Å´Êó•Êú¨„Å´Êù•„Åæ„Åó„Åü„ÄÇ",
                    options: [
                        {ja: "ÂéªÂπ¥„ÅÆ4Êúà", en: "April last year", correct: true},
                        {ja: "‰ªäÂπ¥„ÅÆ4Êúà", en: "April this year", correct: false},
                        {ja: "ÂéªÂπ¥„ÅÆ3Êúà", en: "March last year", correct: false},
                        {ja: "‰ªäÂπ¥„ÅÆ3Êúà", en: "March this year", correct: false}
                    ]
                },
                {
                    questionJA: "Èü≥Â£∞„ÇíËÅû„ÅÑ„Å¶„ÄÅÁî∑„ÅÆ‰∫∫„ÅØ‰ΩïÊõúÊó•„Å´‰ºë„Åø„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Listen to the audio. What day of the week does the man rest?",
                    hasAudio: true,
                    audioText: "ÁßÅ„ÅØÊó•ÊõúÊó•„Å´‰ºë„Åø„Åæ„Åô„ÄÇ",
                    options: [
                        {ja: "Êó•ÊõúÊó•", en: "Sunday", correct: true},
                        {ja: "ÂúüÊõúÊó•", en: "Saturday", correct: false},
                        {ja: "ÊúàÊõúÊó•", en: "Monday", correct: false},
                        {ja: "ÈáëÊõúÊó•", en: "Friday", correct: false}
                    ]
                },
                {
                    questionJA: "Â•≥„ÅÆ‰∫∫„ÅØ‰ΩïÊ≠≥„Åß„Åô„Åã„ÄÇ",
                    questionEN: "How old is the woman?",
                    hasAudio: true,
                    audioText: "ÁßÅ„ÅØ25Ê≠≥„Åß„Åô„ÄÇ",
                    options: [
                        {ja: "25Ê≠≥", en: "25 years old", correct: true},
                        {ja: "23Ê≠≥", en: "23 years old", correct: false},
                        {ja: "27Ê≠≥", en: "27 years old", correct: false},
                        {ja: "24Ê≠≥", en: "24 years old", correct: false}
                    ]
                },
                {
                    questionJA: "Èü≥Â£∞„ÇíËÅû„ÅÑ„Å¶„ÄÅÁî∑„ÅÆ‰∫∫„ÅÆÂÆ∂Êóè„ÅØ‰Ωï‰∫∫„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Listen to the audio. How many people are in the man's family?",
                    hasAudio: true,
                    audioText: "ÁßÅ„ÅÆÂÆ∂Êóè„ÅØ4‰∫∫„Åß„Åô„ÄÇÁà∂„ÄÅÊØç„ÄÅÂ¶π„Å®ÁßÅ„Åß„Åô„ÄÇ",
                    options: [
                        {ja: "4‰∫∫", en: "4 people", correct: true},
                        {ja: "3‰∫∫", en: "3 people", correct: false},
                        {ja: "5‰∫∫", en: "5 people", correct: false},
                        {ja: "2‰∫∫", en: "2 people", correct: false}
                    ]
                }
            ],
            
            section4: [ // Reading (12 questions)
                {
                    questionJA: "Ê¨°„ÅÆÊñá„ÇíË™≠„Çì„ÅßÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÁî∞‰∏≠„Åï„Çì„ÅØÊØéÊúù6ÊôÇ„Å´Ëµ∑„Åç„Å¶„ÄÅ7ÊôÇ„Å´Êúù„Åî„ÅØ„Çì„ÇíÈ£ü„Åπ„Åæ„Åô„ÄÇ8ÊôÇ„Å´ÂÆ∂„ÇíÂá∫„Å¶„ÄÅ9ÊôÇ„Å´‰ºöÁ§æ„Å´ÁùÄ„Åç„Åæ„Åô„ÄÇ„Äç\nÁî∞‰∏≠„Åï„Çì„ÅØ‰ΩïÊôÇ„Å´ÂÆ∂„ÇíÂá∫„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Read the following text and answer.\n'Mr. Tanaka wakes up at 6 AM every morning, eats breakfast at 7 AM. He leaves home at 8 AM and arrives at the company at 9 AM.'\nWhat time does Mr. Tanaka leave home?",
                    options: [
                        {ja: "7ÊôÇ", en: "7 o'clock", correct: false},
                        {ja: "8ÊôÇ", en: "8 o'clock", correct: true},
                        {ja: "9ÊôÇ", en: "9 o'clock", correct: false},
                        {ja: "6ÊôÇ", en: "6 o'clock", correct: false}
                    ]
                },
                {
                    questionJA: "ÁóÖÈô¢„ÅÆÊ°àÂÜÖ„ÇíË™≠„Çì„ÅßÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÂèó‰ªòÊôÇÈñìÔºöÊúà„ÄúÈáë 9:00-17:00„ÄÅÂúü 9:00-12:00„ÄÅÊó•ÊõúÊó•„ÅØ‰ºë„Åø„Äç\nÂúüÊõúÊó•„ÅØ‰ΩïÊôÇ„Åæ„ÅßÂèó‰ªò„Åó„Å¶„ÅÑ„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Read the hospital information and answer.\n'Reception hours: Mon-Fri 9:00-17:00, Sat 9:00-12:00, Closed on Sunday'\nUntil what time is reception open on Saturday?",
                    options: [
                        {ja: "12ÊôÇ", en: "12 o'clock", correct: true},
                        {ja: "17ÊôÇ", en: "17 o'clock", correct: false},
                        {ja: "9ÊôÇ", en: "9 o'clock", correct: false},
                        {ja: "‰ºë„Åø", en: "closed", correct: false}
                    ]
                },
                {
                    questionJA: "„É°„É¢„ÇíË™≠„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n„Äå„Çπ„Éº„Éë„Éº„Åß„Çä„Çì„Åî„ÄÅ„Éê„Éä„Éä„ÄÅÁâõ‰π≥„ÄÅ„Éë„É≥„ÇíË≤∑„ÅÜ„ÄÇËñ¨Â±Ä„ÅßËñ¨„ÇíË≤∑„ÅÜ„ÄÇ„Äç\n„Çπ„Éº„Éë„Éº„ÅßË≤∑„ÅÜ„ÇÇ„ÅÆ„ÅØ„ÅÑ„Åè„Å§„ÅÇ„Çä„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Read the memo.\n'Buy apples, bananas, milk, and bread at the supermarket. Buy medicine at the pharmacy.'\nHow many items should be bought at the supermarket?",
                    options: [
                        {ja: "3„Å§", en: "3 items", correct: false},
                        {ja: "4„Å§", en: "4 items", correct: true},
                        {ja: "5„Å§", en: "5 items", correct: false},
                        {ja: "2„Å§", en: "2 items", correct: false}
                    ]
                },
                {
                    questionJA: "ÈõªËªä„ÅÆÊ°àÂÜÖ„ÇíË™≠„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n„Äå„Åì„ÅÆÈõªËªä„ÅØÊñ∞ÂÆø„ÄÅÊ∏ãË∞∑„ÄÅÂìÅÂ∑ù„ÅÆÈ†ÜÁï™„ÅßÂÅú„Åæ„Çä„Åæ„Åô„ÄÇ„Äç\nÊ∏ãË∞∑„ÅÆÊ¨°„ÅØ„Å©„Åì„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Read the train announcement.\n'This train stops at Shinjuku, Shibuya, and Shinagawa in that order.'\nWhat is the next stop after Shibuya?",
                    options: [
                        {ja: "Êñ∞ÂÆø", en: "Shinjuku", correct: false},
                        {ja: "ÂìÅÂ∑ù", en: "Shinagawa", correct: true},
                        {ja: "Êù±‰∫¨", en: "Tokyo", correct: false},
                        {ja: "Ê±†Ë¢ã", en: "Ikebukuro", correct: false}
                    ]
                },
                {
                    questionJA: "„É¨„Çπ„Éà„É©„É≥„ÅÆ„É°„Éã„É•„Éº„ÇíË¶ã„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„Äå„É©„Éº„É°„É≥ 800ÂÜÜ„ÄÅ„Ç´„É¨„Éº 900ÂÜÜ„ÄÅÂÆöÈ£ü 1200ÂÜÜ„Äç\n‰∏ÄÁï™ÂÆâ„ÅÑÊñôÁêÜ„ÅØ„Å©„Çå„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Look at the restaurant menu.\n'Ramen 800 yen, Curry 900 yen, Set meal 1200 yen'\nWhich dish is the cheapest?",
                    options: [
                        {ja: "„É©„Éº„É°„É≥", en: "Ramen", correct: true},
                        {ja: "„Ç´„É¨„Éº", en: "Curry", correct: false},
                        {ja: "ÂÆöÈ£ü", en: "Set meal", correct: false},
                        {ja: "ÂÖ®ÈÉ®Âêå„Åò", en: "All the same", correct: false}
                    ]
                },
                {
                    questionJA: "Ê¨°„ÅÆÊñá„ÇíË™≠„Çì„ÅßÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÂ±±Áî∞„Åï„Çì„ÅØÊØéÈÄ±ÁÅ´ÊõúÊó•„Å®Êú®ÊõúÊó•„Å´„ÉÜ„Éã„Çπ„Çí„Åó„Åæ„Åô„ÄÇÂúüÊõúÊó•„ÅØÂèãÈÅî„Å®Êò†Áîª„ÇíË¶ã„Åæ„Åô„ÄÇ„Äç\nÂ±±Áî∞„Åï„Çì„ÅØÈÄ±„Å´‰ΩïÂõû„ÉÜ„Éã„Çπ„Çí„Åó„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Read the following text and answer.\n'Mr. Yamada plays tennis every Tuesday and Thursday. On Saturday he watches movies with friends.'\nHow many times a week does Mr. Yamada play tennis?",
                    options: [
                        {ja: "1Âõû", en: "1 time", correct: false},
                        {ja: "2Âõû", en: "2 times", correct: true},
                        {ja: "3Âõû", en: "3 times", correct: false},
                        {ja: "4Âõû", en: "4 times", correct: false}
                    ]
                },
                {
                    questionJA: "Âõ≥Êõ∏È§®„ÅÆÊ°àÂÜÖ„ÇíË™≠„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÈñãÈ§®ÊôÇÈñìÔºöÂπ≥Êó• 9:00-20:00„ÄÅÂúüÊó• 10:00-18:00„ÄÅÁ•ùÊó•„ÅØ‰ºëÈ§®„Äç\nÊó•ÊõúÊó•„ÅÆÈñãÈ§®ÊôÇÈñì„ÅØ‰ΩïÊôÇ„Åã„Çâ„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Read the library information.\n'Opening hours: Weekdays 9:00-20:00, Weekends 10:00-18:00, Closed on holidays'\nWhat time does the library open on Sunday?",
                    options: [
                        {ja: "9ÊôÇ", en: "9 o'clock", correct: false},
                        {ja: "10ÊôÇ", en: "10 o'clock", correct: true},
                        {ja: "18ÊôÇ", en: "18 o'clock", correct: false},
                        {ja: "20ÊôÇ", en: "20 o'clock", correct: false}
                    ]
                },
                {
                    questionJA: "Ê¨°„ÅÆÊñá„ÇíË™≠„Çì„ÅßÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„Äå‰ΩêËó§„Åï„Çì„ÅØËªä„Åß‰ºöÁ§æ„Å´Ë°å„Åç„Åæ„Åô„ÄÇÂÆ∂„Åã„Çâ‰ºöÁ§æ„Åæ„Åß30ÂàÜ„Åã„Åã„Çä„Åæ„Åô„ÄÇ„Äç\n‰ΩêËó§„Åï„Çì„ÅØ‰Ωï„Åß‰ºöÁ§æ„Å´Ë°å„Åç„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Read the following text and answer.\n'Mr. Sato goes to work by car. It takes 30 minutes from home to the company.'\nHow does Mr. Sato go to work?",
                    options: [
                        {ja: "Ëªä", en: "car", correct: true},
                        {ja: "ÈõªËªä", en: "train", correct: false},
                        {ja: "„Éê„Çπ", en: "bus", correct: false},
                        {ja: "Ëá™Ëª¢Ëªä", en: "bicycle", correct: false}
                    ]
                },
                {
                    questionJA: "Â∫ó„ÅÆÁúãÊùø„ÇíË™≠„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÂñ∂Ê•≠ÊôÇÈñìÔºöÂçàÂâç11ÊôÇ„ÄúÂçàÂæå9ÊôÇ„ÄÅÂÆö‰ºëÊó•ÔºöÊúàÊõúÊó•„Äç\n„Åì„ÅÆÂ∫ó„ÅØ„ÅÑ„Å§‰ºë„Åø„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Read the store sign.\n'Business hours: 11 AM - 9 PM, Regular holiday: Monday'\nWhen is this store closed?",
                    options: [
                        {ja: "ÊúàÊõúÊó•", en: "Monday", correct: true},
                        {ja: "Êó•ÊõúÊó•", en: "Sunday", correct: false},
                        {ja: "ÂúüÊõúÊó•", en: "Saturday", correct: false},
                        {ja: "ÁÅ´ÊõúÊó•", en: "Tuesday", correct: false}
                    ]
                },
                {
                    questionJA: "Ê¨°„ÅÆÊñá„ÇíË™≠„Çì„ÅßÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„Äå‰ªäÊó•„ÅØÈõ®„ÅåÈôç„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇÂÇò„ÇíÊåÅ„Å£„Å¶Âá∫„Åã„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ„Äç\n‰ªäÊó•„ÅÆÂ§©Ê∞ó„ÅØ„Å©„ÅÜ„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Read the following text and answer.\n'It is raining today. Let's take an umbrella when we go out.'\nHow is today's weather?",
                    options: [
                        {ja: "Èõ®", en: "rainy", correct: true},
                        {ja: "Êô¥„Çå", en: "sunny", correct: false},
                        {ja: "Êõá„Çä", en: "cloudy", correct: false},
                        {ja: "Èõ™", en: "snowy", correct: false}
                    ]
                },
                {
                    questionJA: "„Ç¢„Éë„Éº„Éà„ÅÆÊ°àÂÜÖ„ÇíË™≠„Çì„Åß„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÂÆ∂Ë≥ÉÔºöÊúà8‰∏áÂÜÜ„ÄÅÊï∑ÈáëÔºö2„É∂ÊúàÂàÜ„ÄÅÁ§ºÈáëÔºö1„É∂ÊúàÂàÜ„Äç\nÊï∑Èáë„ÅØ„ÅÑ„Åè„Çâ„Åß„Åô„Åã„ÄÇ",
                    questionEN: "Read the apartment information.\n'Rent: 80,000 yen per month, Deposit: 2 months' worth, Key money: 1 month's worth'\nHow much is the deposit?",
                    options: [
                        {ja: "8‰∏áÂÜÜ", en: "80,000 yen", correct: false},
                        {ja: "16‰∏áÂÜÜ", en: "160,000 yen", correct: true},
                        {ja: "24‰∏áÂÜÜ", en: "240,000 yen", correct: false},
                        {ja: "32‰∏áÂÜÜ", en: "320,000 yen", correct: false}
                    ]
                },
                {
                    questionJA: "Ê¨°„ÅÆÊñá„ÇíË™≠„Çì„ÅßÁ≠î„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\n„ÄåÁßÅ„ÅØÊØéÊúù„Ç≥„Éº„Éí„Éº„ÇíÈ£≤„Åø„Åæ„Åô„ÄÇ„Åß„ÇÇ„ÄÅÂ§ú„ÅØ„ÅäËå∂„ÇíÈ£≤„Åø„Åæ„Åô„ÄÇ„Äç\n„Åì„ÅÆ‰∫∫„ÅØÂ§ú‰Ωï„ÇíÈ£≤„Åø„Åæ„Åô„Åã„ÄÇ",
                    questionEN: "Read the following text and answer.\n'I drink coffee every morning. But at night I drink tea.'\nWhat does this person drink at night?",
                    options: [
                        {ja: "„Ç≥„Éº„Éí„Éº", en: "coffee", correct: false},
                        {ja: "„ÅäËå∂", en: "tea", correct: true},
                        {ja: "Ê∞¥", en: "water", correct: false},
                        {ja: "„Ç∏„É•„Éº„Çπ", en: "juice", correct: false}
                    ]
                }
            ]
        };

        // Section information
        const sectionInfo = [
            {title: "Script & Vocabulary", subtitle: "Questions 1-12"},
            {title: "Conversation & Expression", subtitle: "Questions 13-24"},
            {title: "Listening", subtitle: "Questions 25-36"},
            {title: "Reading", subtitle: "Questions 37-48"}
        ];

        // Generate full 48 questions (12 per section)
        function generateFullQuestionSet() {
            const fullQuestions = [];
            
            Object.keys(questionBank).forEach((section, sectionIndex) => {
                questionBank[section].forEach((question, questionIndex) => {
                    const questionCopy = { ...question };
                    questionCopy.section = sectionIndex + 1;
                    questionCopy.sectionName = ['Script and Vocabulary', 'Conversation and Expression', 'Listening', 'Reading'][sectionIndex];
                    fullQuestions.push(questionCopy);
                });
            });
            
            return fullQuestions;
        }

        // Global variables
        let questions = generateFullQuestionSet();
        let currentQuestion = 0;
        let userAnswers = new Array(48).fill(null);
        let flaggedQuestions = new Set();
        let timeLeft = 3600; // 60 minutes (1 hour)
        let currentLang = 'ja';
        let timerInterval;
        let audioPlayCount = {};

        // Initialize
        function initTest() {
            createQuestionNavigation();
            loadQuestion(0);
            startTimer();
            updateNavigationBar(0);
        }

        function createQuestionNavigation() {
            const columns = ['section1Column', 'section2Column', 'section3Column', 'section4Column'];
            
            columns.forEach((columnId, sectionIndex) => {
                const column = document.getElementById(columnId);
                column.innerHTML = '';
                
                for(let i = 0; i < 12; i++) {
                    const questionNum = (sectionIndex * 12) + i;
                    const btn = document.createElement('div');
                    btn.className = 'question-num';
                    btn.textContent = questionNum + 1;
                    btn.onclick = () => changeQuestionWithConfirmation(questionNum);
                    column.appendChild(btn);
                }
            });
        }

        function updateNavigationBar(questionIndex) {
            const sectionIndex = Math.floor(questionIndex / 12);
            document.getElementById('navSectionTitle').textContent = sectionInfo[sectionIndex].title;
            document.getElementById('navSectionSubtitle').textContent = sectionInfo[sectionIndex].subtitle;
        }

        function changeQuestionWithConfirmation(targetQuestionIndex) {
            const targetSection = Math.floor(targetQuestionIndex / 12);
            const currentSection = Math.floor(currentQuestion / 12);
            
            if(targetSection !== currentSection) {
                showSectionChangeConfirmation(targetQuestionIndex);
            } else {
                loadQuestion(targetQuestionIndex);
            }
        }

        function showSectionChangeConfirmation(targetQuestionIndex) {
            const targetSection = Math.floor(targetQuestionIndex / 12);
            const sectionName = sectionInfo[targetSection].title;
            
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                z-index: 1500;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            popup.innerHTML = `
                <div style="
                    background: white;
                    padding: 40px;
                    border-radius: 8px;
                    text-align: center;
                    border: 3px solid #2c5aa0;
                    max-width: 450px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                ">
                    <div style="color: #2c5aa0; font-size: 20px; font-weight: bold; margin-bottom: 20px;">
                        Section Change Confirmation
                    </div>
                    <div style="font-size: 16px; margin-bottom: 25px; line-height: 1.5;">
                        You are about to move to:<br>
                        <strong>${sectionName}</strong><br>
                        <span style="color: #666; font-size: 14px;">(Question ${targetQuestionIndex + 1})</span>
                    </div>
                    <div style="background: #f0f8ff; padding: 15px; border-radius: 6px; margin-bottom: 25px; font-size: 14px; color: #555;">
                        ‚ö† Make sure you have completed all questions in the current section before proceeding.
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                            background: #666;
                            color: white;
                            border: none;
                            padding: 12px 25px;
                            border-radius: 4px;
                            font-size: 14px;
                            cursor: pointer;
                        ">Cancel</button>
                        <button onclick="loadQuestion(${targetQuestionIndex}); this.parentElement.parentElement.parentElement.remove();" style="
                            background: #2c5aa0;
                            color: white;
                            border: none;
                            padding: 12px 25px;
                            border-radius: 4px;
                            font-size: 14px;
                            font-weight: bold;
                            cursor: pointer;
                        ">Continue</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
        }

        function loadQuestion(index) {
            currentQuestion = index;
            const question = questions[index];
            
            // Update header
            document.getElementById('currentNum').textContent = index + 1;
            document.getElementById('currentSection').textContent = question.sectionName;
            
            // Update navigation bar
            updateNavigationBar(index);
            
            // Update navigation highlighting
            updateNavigationHighlight();
            
            // Load question text
            document.getElementById('questionJA').textContent = question.questionJA;
            document.getElementById('questionEN').textContent = question.questionEN;
            
            // Show/hide audio section
            const audioSection = document.getElementById('audioSection');
            if(question.hasAudio) {
                audioSection.style.display = 'block';
                if(!audioPlayCount[index]) {
                    audioPlayCount[index] = 0;
                }
                updateAudioButtons(index);
            } else {
                audioSection.style.display = 'none';
            }
            
            // Load options
            loadOptions(question.options);
            
            // Update buttons
            updateControlButtons();
            
            // Set language display
            setLanguage(currentLang);
        }

        function loadOptions(options) {
            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            
            options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                if(userAnswers[currentQuestion] === index) {
                    optionDiv.classList.add('selected');
                }
                
                optionDiv.innerHTML = `
                    <div class="option-radio"></div>
                    <div class="option-text">
                        <div class="option-jp">${option.ja}</div>
                        <div class="option-en" style="display: ${currentLang === 'en' ? 'block' : 'none'};">${option.en}</div>
                    </div>
                `;
                
                optionDiv.onclick = () => selectAnswer(index);
                container.appendChild(optionDiv);
            });
        }

        function selectAnswer(answerIndex) {
            // Clear previous selection
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            
            // Select new answer
            document.querySelectorAll('.option')[answerIndex].classList.add('selected');
            
            // Store answer
            userAnswers[currentQuestion] = answerIndex;
            
            // Update navigation
            updateNavigationHighlight();
        }

        function updateNavigationHighlight() {
            document.querySelectorAll('.question-num').forEach((btn, index) => {
                btn.classList.remove('current', 'answered', 'flagged');
                
                if(index === currentQuestion) {
                    btn.classList.add('current');
                } else if(userAnswers[index] !== null) {
                    btn.classList.add('answered');
                }
                
                if(flaggedQuestions.has(index)) {
                    btn.classList.add('flagged');
                }
            });
        }

        function setLanguage(lang) {
            currentLang = lang;
            const jaElements = document.querySelectorAll('.question-japanese, .option-jp');
            const enElements = document.querySelectorAll('.question-english, .option-en');
            const langBtns = document.querySelectorAll('.lang-btn');
            
            langBtns.forEach(btn => btn.classList.remove('active'));
            
            if(lang === 'ja') {
                jaElements.forEach(el => el.style.display = 'block');
                enElements.forEach(el => el.style.display = 'none');
                langBtns[0].classList.add('active');
            } else {
                jaElements.forEach(el => el.style.display = 'none');
                enElements.forEach(el => el.style.display = 'block');
                langBtns[1].classList.add('active');
            }
        }

        function playAudio() {
            const question = questions[currentQuestion];
            if(question.hasAudio && audioPlayCount[currentQuestion] < 2) {
                audioPlayCount[currentQuestion]++;
                
                showAudioPopup(question.audioText || "Sample audio content");
                updateAudioButtons(currentQuestion);
            }
        }

        function replayAudio() {
            playAudio();
        }

        function showAudioPopup(audioText) {
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: white;
                border: 3px solid #2c5aa0;
                padding: 30px;
                border-radius: 8px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
                z-index: 1000;
                min-width: 400px;
                text-align: center;
            `;
            
            popup.innerHTML = `
                <div style="color: #2c5aa0; font-size: 18px; font-weight: bold; margin-bottom: 20px;">üéß Audio Playing</div>
                <div style="background: #f0f8ff; padding: 20px; border-radius: 6px; margin: 15px 0; font-size: 16px; border: 1px solid #ddd;">
                    "${audioText}"
                </div>
                <div style="margin: 20px 0; color: #666; font-size: 14px;">
                    Audio duration: 3 seconds<br>
                    Remaining plays: ${2 - audioPlayCount[currentQuestion]}
                </div>
                <button onclick="this.parentElement.remove()" style="
                    background: #2c5aa0; 
                    color: white; 
                    border: none; 
                    padding: 10px 25px; 
                    border-radius: 4px; 
                    cursor: pointer;
                    font-size: 14px;
                    font-weight: bold;
                ">Close</button>
            `;
            
            document.body.appendChild(popup);
            
            // Auto close after 3 seconds
            setTimeout(() => {
                if(popup.parentElement) {
                    popup.remove();
                }
            }, 3000);
        }

        function updateAudioButtons(questionIndex) {
            const playBtn = document.getElementById('playBtn');
            const replayBtn = document.getElementById('replayBtn');
            const playCount = audioPlayCount[questionIndex] || 0;
            
            playBtn.disabled = playCount >= 2;
            replayBtn.disabled = playCount === 0 || playCount >= 2;
            
            playBtn.textContent = playCount === 0 ? '‚ñ∂ Play' : '‚ñ∂ Play Again';
            replayBtn.textContent = `üîÅ Replay (${2 - playCount} left)`;
        }

        function nextQuestion() {
            if(currentQuestion < 47) {
                changeQuestionWithConfirmation(currentQuestion + 1);
            }
        }

        function previousQuestion() {
            if(currentQuestion > 0) {
                changeQuestionWithConfirmation(currentQuestion - 1);
            }
        }

        function flagQuestion() {
            if(flaggedQuestions.has(currentQuestion)) {
                flaggedQuestions.delete(currentQuestion);
                document.getElementById('flagBtn').textContent = 'üèÅ Flag';
                document.getElementById('flagBtn').style.backgroundColor = '#ff8c00';
            } else {
                flaggedQuestions.add(currentQuestion);
                document.getElementById('flagBtn').textContent = 'üèÅ Unflag';
                document.getElementById('flagBtn').style.backgroundColor = '#dc3545';
            }
            updateNavigationHighlight();
        }

        function updateControlButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const flagBtn = document.getElementById('flagBtn');
            
            prevBtn.disabled = currentQuestion === 0;
            nextBtn.disabled = currentQuestion === 47;
            
            // Update flag button
            if(flaggedQuestions.has(currentQuestion)) {
                flagBtn.textContent = 'üèÅ Unflag';
                flagBtn.style.backgroundColor = '#dc3545';
            } else {
                flagBtn.textContent = 'üèÅ Flag';
                flagBtn.style.backgroundColor = '#ff8c00';
            }
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimeDisplay();
                
                if(timeLeft <= 0) {
                    clearInterval(timerInterval);
                    showTimeUpPopup();
                }
            }, 1000);
        }

        function updateTimeDisplay() {
            const hours = Math.floor(timeLeft / 3600);
            const minutes = Math.floor((timeLeft % 3600) / 60);
            const seconds = timeLeft % 60;
            
            const display = hours > 0 
                ? `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`
                : `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
            document.getElementById('timeDisplay').textContent = display;
            
            // Warning colors
            if(timeLeft <= 300) { // Last 5 minutes
                document.getElementById('timeDisplay').style.backgroundColor = '#dc3545';
            } else if(timeLeft <= 600) { // Last 10 minutes
                document.getElementById('timeDisplay').style.backgroundColor = '#ff8c00';
            }
        }

        function showTimeUpPopup() {
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.8);
                z-index: 2000;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            popup.innerHTML = `
                <div style="
                    background: white;
                    padding: 50px;
                    border-radius: 10px;
                    text-align: center;
                    border: 4px solid #dc3545;
                    max-width: 500px;
                ">
                    <div style="color: #dc3545; font-size: 24px; font-weight: bold; margin-bottom: 20px;">
                        ‚è∞ TIME UP!
                    </div>
                    <div style="font-size: 18px; margin-bottom: 30px; line-height: 1.5;">
                        The test time has expired.<br>
                        Your answers will be automatically submitted.
                    </div>
                    <button onclick="submitTest(); this.parentElement.parentElement.remove();" style="
                        background: #dc3545;
                        color: white;
                        border: none;
                        padding: 15px 30px;
                        border-radius: 6px;
                        font-size: 16px;
                        font-weight: bold;
                        cursor: pointer;
                    ">Submit Test</button>
                </div>
            `;
            
            document.body.appendChild(popup);
        }

        function submitTest() {
            showSubmitConfirmation();
        }

        function showSubmitConfirmation() {
            const unanswered = userAnswers.filter(answer => answer === null).length;
            
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.7);
                z-index: 1500;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            popup.innerHTML = `
                <div style="
                    background: white;
                    padding: 40px;
                    border-radius: 8px;
                    text-align: center;
                    border: 3px solid #2c5aa0;
                    max-width: 450px;
                ">
                    <div style="color: #2c5aa0; font-size: 20px; font-weight: bold; margin-bottom: 25px;">
                        Submit Test Confirmation
                    </div>
                    <div style="font-size: 16px; margin-bottom: 20px; line-height: 1.5;">
                        You have answered <strong>${48 - unanswered}</strong> out of <strong>48</strong> questions.
                        ${unanswered > 0 ? `<br><br><span style="color: #dc3545;">‚ö† ${unanswered} questions remain unanswered.</span>` : ''}
                    </div>
                    <div style="margin-bottom: 25px; font-size: 14px; color: #666;">
                        Once submitted, you cannot return to the test.
                    </div>
                    <div style="display: flex; gap: 15px; justify-content: center;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="
                            background: #666;
                            color: white;
                            border: none;
                            padding: 12px 25px;
                            border-radius: 4px;
                            font-size: 14px;
                            cursor: pointer;
                        ">Cancel</button>
                        <button onclick="finalSubmit(); this.parentElement.parentElement.parentElement.remove();" style="
                            background: #dc3545;
                            color: white;
                            border: none;
                            padding: 12px 25px;
                            border-radius: 4px;
                            font-size: 14px;
                            font-weight: bold;
                            cursor: pointer;
                        ">Submit Test</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
        }

        function finalSubmit() {
            clearInterval(timerInterval);
            
            // Calculate scores
            const scores = [0, 0, 0, 0]; // Section scores
            let totalCorrect = 0;
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                if(userAnswer !== null && question.options[userAnswer].correct) {
                    scores[question.section - 1]++;
                    totalCorrect++;
                }
            });
            
            // Store results in localStorage for result pages
            const resultData = {
                totalScore: totalCorrect,
                totalQuestions: 48,
                percentage: Math.round((totalCorrect / 48) * 100),
                sectionScores: scores,
                sectionTotals: [12, 12, 12, 12],
                passed: Math.round((totalCorrect / 48) * 100) >= 70,
                completionTime: new Date().toLocaleString('ja-JP'),
                sessionId: 'JFT-' + Date.now().toString().slice(-8)
            };
            
            localStorage.setItem('jftResults', JSON.stringify(resultData));
            
            // Redirect to appropriate result page
            if(resultData.passed) {
                window.location.href = 'pass.html';
            } else {
                window.location.href = 'fail.html';
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if(e.ctrlKey || e.altKey) return;
            
            switch(e.key) {
                case 'ArrowLeft':
                    e.preventDefault();
                    previousQuestion();
                    break;
                case 'ArrowRight':
                    e.preventDefault();
                    nextQuestion();
                    break;
                case '1':
                case '2':
                case '3':
                case '4':
                    e.preventDefault();
                    const optionIndex = parseInt(e.key) - 1;
                    if(optionIndex < 4) {
                        selectAnswer(optionIndex);
                    }
                    break;
                case 'f':
                case 'F':
                    e.preventDefault();
                    flagQuestion();
                    break;
            }
        });

        // Prevent right-click and other shortcuts
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', e => e.preventDefault());
        document.addEventListener('dragstart', e => e.preventDefault());

        // Disable F5, Ctrl+R, etc.
        document.addEventListener('keydown', function(e) {
            if(e.key === 'F5' || 
               (e.ctrlKey && e.key === 'r') || 
               (e.ctrlKey && e.key === 'R') ||
               (e.ctrlKey && e.shiftKey && e.key === 'I') ||
               (e.key === 'F12')) {
                e.preventDefault();
                showWarningPopup('Function disabled during test');
            }
        });

        function showWarningPopup(message) {
            const popup = document.createElement('div');
            popup.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #ff4444;
                color: white;
                padding: 15px 20px;
                border-radius: 6px;
                z-index: 2000;
                font-weight: bold;
                box-shadow: 0 4px 15px rgba(255,68,68,0.3);
            `;
            popup.textContent = `‚ö† ${message}`;
            document.body.appendChild(popup);
            
            setTimeout(() => popup.remove(), 3000);
        }

        // Window visibility warning
        document.addEventListener('visibilitychange', function() {
            if(document.hidden) {
                showWarningPopup('Test window lost focus - Please return to test');
            }
        });

        // Initialize the test when page loads
        window.onload = initTest;
    </script>
</body>
</html>